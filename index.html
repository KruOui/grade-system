<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบบันทึกคะแนนนักเรียน</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f1f5f9; }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto p-4">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
            <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white">
                <h1 class="text-xl font-bold">บันทึกคะแนนนักเรียน</h1>
                <p class="text-blue-100 text-sm">จัดการข้อมูลผลการเรียนได้ง่ายๆ</p>
            </div>

            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-1">ปีการศึกษา</label>
                    <select v-model="form.year" class="w-full border-2 border-slate-200 rounded-lg p-2.5 focus:border-blue-500 outline-none">
                        <option v-for="y in years" :key="y" :value="y">{{ y }}</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-1">วิชา</label>
                    <select v-model="form.subject" class="w-full border-2 border-slate-200 rounded-lg p-2.5 focus:border-blue-500 outline-none">
                        <option v-for="s in subjects" :key="s" :value="s">{{ s }}</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">เลขที่</label>
                        <input type="number" v-model="form.no" class="w-full border-2 border-slate-200 rounded-lg p-2.5 focus:border-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">คะแนน (100)</label>
                        <input type="number" v-model="form.score" class="w-full border-2 border-slate-200 rounded-lg p-2.5 focus:border-blue-500 outline-none" placeholder="0-100">
                    </div>
                </div>

                <button @click="saveData" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition duration-200 shadow-lg">
                    บันทึกข้อมูล
                </button>
            </div>

            <div class="border-t border-slate-100 p-6 bg-slate-50">
                <h2 class="font-bold text-slate-800 mb-3">รายการที่บันทึกไว้</h2>
                <div v-if="records.length === 0" class="text-center text-slate-400 py-4">ยังไม่มีข้อมูล</div>
                <div class="space-y-2">
                    <div v-for="(item, index) in records" :key="index" class="bg-white p-3 rounded-lg border border-slate-200 flex justify-between items-center shadow-sm">
                        <div>
                            <div class="font-bold text-slate-700">{{ item.subject }}</div>
                            <div class="text-xs text-slate-500">เลขที่ {{ item.no }} | คะแนน: {{ item.score }}</div>
                        </div>
                        <div :class="getGradeColor(item.score)" class="px-3 py-1 rounded-full font-bold text-sm border">
                            เกรด {{ calcGrade(item.score) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;

        createApp({
            setup() {
                const years = ["2567", "2568", "2569"];
                const subjects = ["คอมพิวเตอร์ ม.1", "วิทยาการคำนวณ ม.1", "ออกแบบและเทคโนโลยี ม.1"];
                const records = ref([]);
                const form = ref({ year: "2567", subject: subjects[0], no: "", score: "" });

                onMounted(() => {
                    const saved = localStorage.getItem('grade_data');
                    if (saved) records.ref = JSON.parse(saved);
                });

                const calcGrade = (score) => {
                    const s = Number(score);
                    if (s < 50) return "0";
                    if (s < 55) return "1";
                    if (s < 60) return "1.5";
                    if (s < 65) return "2";
                    if (s < 70) return "2.5";
                    if (s < 75) return "3";
                    if (s < 80) return "3.5";
                    return "4";
                };

                const getGradeColor = (score) => {
                    const grade = calcGrade(score);
                    if (grade === "0") return "bg-red-50 text-red-600 border-red-200";
                    if (Number(grade) >= 3) return "bg-green-50 text-green-600 border-green-200";
                    return "bg-blue-50 text-blue-600 border-blue-200";
                };

                const saveData = () => {
                    if (!form.value.no || !form.value.score) return alert("กรุณากรอกข้อมูลให้ครบ");
                    records.value.unshift({ ...form.value });
                    localStorage.setItem('grade_data', JSON.stringify(records.value));
                    form.value.no = "";
                    form.value.score = "";
                };

                return { form, years, subjects, records, saveData, calcGrade, getGradeColor };
            }
        }).mount('#app');
    </script>
</body>
</html>
